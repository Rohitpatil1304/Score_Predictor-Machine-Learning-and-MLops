schema: '2.0'
stages:
  Data_Preprocessing:
    cmd: python src/data/Data_Preprocessing.py
    deps:
    - path: data/raw/dataset_level_new.pkl
      hash: md5
      md5: 383f7af96a69763247d3f873ab1fcd58
      size: 198971179
    - path: src/data/Data_Preprocessing.py
      hash: md5
      md5: 525c5931006d995b835de12c1af87570
      size: 3878
    outs:
    - path: data/processed/dataset_level2.pkl
      hash: md5
      md5: f0c1c9240441d0ff8db7e7ff63dba28c
      size: 4503007
  Feature_Engineering:
    cmd: python src/features/Feature_Engineering.py
    deps:
    - path: data/processed/dataset_level2.pkl
      hash: md5
      md5: f0c1c9240441d0ff8db7e7ff63dba28c
      size: 4503007
    - path: src/features/Feature_Engineering.py
      hash: md5
      md5: 1c22aae426b3c34196c235c81ebf0e09
      size: 1871
    outs:
    - path: data/interim/dataset_level3_feature_ready.pkl
      hash: md5
      md5: dc3d93721687d627a632496256488e05
      size: 3469184
  Training_Model:
    cmd: python src/models/Training_Model.py
    deps:
    - path: data/interim/dataset_level3_feature_ready.pkl
      hash: md5
      md5: dc3d93721687d627a632496256488e05
      size: 3469184
    - path: src/models/Training_Model.py
      hash: md5
      md5: 842e26bfa978fe8890190d7cf732bb5b
      size: 4204
    params:
      params.yaml:
        model:
          objective: reg:squarederror
          random_state: 1
          eval_metric: rmse
          tree_method: hist
        param_dist:
          n_estimators:
          - 500
          - 1000
          learning_rate:
          - 0.01
          - 0.1
          max_depth:
          - 6
          - 8
          - 10
          subsample:
          - 0.7
          colsample_bytree:
          - 0.8
          reg_alpha:
          - 0
          reg_lambda:
          - 1
        train:
          test_size: 0.1
          random_state: 1
          cv_folds: 5
          n_trials: 10
    outs:
    - path: model/pipe.pkl
      hash: md5
      md5: ac00930b54bd5606b6f69961e9a6bbc9
      size: 21091674
    - path: reports/best_params.json
      hash: md5
      md5: 33b0445d55382f573813f11dcb560ed9
      size: 224
  Register_Model:
    cmd: python src/models/register_model.py
    deps:
    - path: model/pipe.pkl
      hash: md5
      md5: ac00930b54bd5606b6f69961e9a6bbc9
      size: 21091674
    - path: src/models/register_model.py
      hash: md5
      md5: 784b5399bd7150ff7c853f6b3da8e925
      size: 11011
    params:
      params.yaml:
        model:
          objective: reg:squarederror
          random_state: 1
          eval_metric: rmse
          tree_method: hist
        train:
          test_size: 0.1
          random_state: 1
          cv_folds: 5
          n_trials: 10
